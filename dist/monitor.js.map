{"version":3,"file":"monitor.js","sources":["../src/config.js","../src/utils.js","../src/cache.js","../src/report.js","../src/performance/fetch.js","../src/performance/observerEntries.js","../src/performance/observerFCP.js","../src/performance/observerLCP.js","../src/performance/observerLoad.js","../src/performance/observerPaint.js","../src/performance/xhr.js","../src/performance/index.js","../src/behavior/onClick.js","../src/behavior/pageChange.js","../src/behavior/pv.js","../src/behavior/index.js","../src/error/index.js","../src/webEyeSDK.js"],"sourcesContent":["const config = {\r\n  url: '',//上报url地址\r\n  projectName: 'eyesdk',//项目名称\r\n  appId: '123456',//应用id\r\n  userId: '123456',//用户id\r\n  isImageUpload: false,//是否开启图片上传\r\n  batchSize: 2,//批量上报数量\r\n}\r\n\r\n/**\r\n * 设置配置\r\n * @param {Object} options 配置对象\r\n */\r\nexport function setConfig(options) {\r\n  for (const key in config) {\r\n    if (options[key]) {\r\n      config[key] = options[key];\r\n    }\r\n  }\r\n}\r\nexport default config;","/**\r\n * 深拷贝\r\n * @param {*} target \r\n * @returns \r\n */\r\nexport function deepCopy(target) {\r\n  if(typeof target === 'object') {\r\n    const result = Array.isArray(target) ? [] : {};\r\n    for(const key in target) {\r\n      if(typeof target[key] === 'object') {\r\n        result[key] = deepCopy(target[key]);\r\n      }else {\r\n        result[key] = target[key];\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  return target;\r\n}\r\n\r\n/**\r\n * 生成唯一id\r\n * @returns \r\n */\r\nexport function generateUniqueId() {\r\n  return \"id-\" + Date.now() + \"-\" + Math.random().toString(36).substring(2, 9);\r\n}","import { deepCopy } from './utils';\r\n\r\nconst cache = [];\r\nexport function getCache() {\r\n  return deepCopy(cache);\r\n}\r\nexport function addCache(data) {\r\n  cache.push(data);\r\n}\r\nexport function clearCache() {\r\n  cache.length = 0;\r\n}","import config from \"./config\";\r\nimport { generateUniqueId } from \"./utils\";\r\nimport { getCache, addCache, clearCache } from \"./cache\";\r\nexport const originalProto = XMLHttpRequest.prototype;\r\nexport const originalOpen = XMLHttpRequest.prototype.open;\r\nexport const originalSend = XMLHttpRequest.prototype.send;\r\n\r\n/**\r\n * 判断是否支持sendBeacon\r\n * @returns\r\n */\r\nexport function isSupportSendBeacon() {\r\n  return \"sendBeacon\" in navigator;\r\n}\r\n\r\n/**\r\n * 上报数据\r\n * @param {*} data\r\n */\r\nexport function report(data) {\r\n  if (!config.url) {\r\n    console.error(\"请先配置上报地址\");\r\n  }\r\n  const reportData = JSON.stringify({\r\n    id: generateUniqueId(),\r\n    data,\r\n  });\r\n  // 如果配置了图片上传，则使用图片上传\r\n  if (config.isImageUpload) {\r\n    imgRequest(reportData);\r\n  } else {\r\n    // 如果支持sendBeacon，则使用sendBeacon发送\r\n    if (window.navigator.sendBeacon) {\r\n      return beaconRequest(reportData);\r\n    } else {\r\n      // 如果sendBeacon发送失败，则使用ajax发送\r\n      xhrRequest(reportData);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 批量上报\r\n * @param {*} data\r\n */\r\nexport function lazyReportBatch(data) {\r\n  addCache(data);\r\n  const dataCache = getCache();\r\n  console.error(\"dataCache\", dataCache);\r\n  if (dataCache.length && dataCache.length > config.batchSize) {\r\n    report(dataCache);\r\n    clearCache();\r\n  }\r\n}\r\n\r\n//发送图片数据\r\nexport function imgRequest(data) {\r\n  const img = new Image();\r\n  //http://127.0.0.1:8080/api?data=encodeURIComponent(JSON.stringify(data))\r\n  img.src = `${config.url}?data=${encodeURIComponent(JSON.stringify(data))}`;\r\n}\r\n\r\n//普通ajax发送请求数据\r\nexport function xhrRequest(url, data) {\r\n  if (window.requestIdleCallback) {\r\n    //指定在浏览器空闲时期执行\r\n    window.requestIdleCallback(\r\n      () => {\r\n        const xhr = new XMLHttpRequest();\r\n        originalOpen.call(xhr, \"post\", url);\r\n        originalSend.call(xhr, JSON.stringify(data));\r\n      },\r\n      { timeout: 3000 }\r\n    );\r\n  } else {\r\n    setTimeout(() => {\r\n      const xhr = new XMLHttpRequest();\r\n      originalOpen.call(xhr, \"post\", url);\r\n      originalSend.call(xhr, JSON.stringify(data));\r\n    });\r\n  }\r\n}\r\n\r\n//sendBeacon发送数据\r\n//const sendBeacon = isSupportSendBeacon() ? navigator.sendBeacon : xhrRequest;\r\nexport function beaconRequest(data) {\r\n  if (window.requestIdleCallback) {\r\n    //指定在浏览器空闲时期执行\r\n    window.requestIdleCallback(\r\n      () => {\r\n        window.navigator.sendBeacon(config.url, data);\r\n      },\r\n      { timeout: 3000 }\r\n    );\r\n  } else {\r\n    setTimeout(() => {\r\n      window.navigator.sendBeacon(config.url, data);\r\n    });\r\n  }\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n\r\n/**\r\n * 重写fetch\r\n */\r\nconst originalFetch = window.fetch;\r\nfunction overwriteFetch() {\r\n  window.fetch = function newFetch(url, config) {\r\n    const startTime = Date.now();\r\n    const reportData = {\r\n      type: \"performance\",\r\n      subType: \"fetch\",\r\n      url,\r\n      startTime,\r\n      method: config.method,\r\n    };\r\n    return originalFetch(url, config)\r\n      .then((res) => {\r\n        const endTime = Date.now();\r\n        reportData.endTime = endTime;\r\n        reportData.duration = endTime - startTime;\r\n        const data = res.clone();\r\n        reportData.status = data.status;\r\n        reportData.success = data.ok;\r\n        //上报数据\r\n        lazyReportBatch(reportData);\r\n        return res;\r\n      })\r\n      .catch((err) => {\r\n        const endTime = Date.now();\r\n        reportData.endTime = endTime;\r\n        reportData.duration = endTime - startTime;\r\n        reportData.status = 0;\r\n        reportData.success = false;\r\n        //上报数据\r\n        lazyReportBatch(reportData);\r\n      });\r\n  };\r\n}\r\n\r\n/**\r\n * 监听fetch\r\n */\r\nexport default function fetch() {\r\n  overwriteFetch();\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n/**\r\n * 监听页面所有资源加载\r\n */\r\nexport default function observerEntries() {\r\n  if (document.readyState === \"complete\") {\r\n    observerEvent();\r\n  } else {\r\n    const onload = () => {\r\n      observerEvent();\r\n      window.removeEventListener(\"load\", onload, true);\r\n    };\r\n    window.addEventListener(\"load\", onload, true);\r\n  }\r\n}\r\n\r\nexport function observerEvent() {\r\n  const entryHandler = (list) => {\r\n    const data = list.getEntries();\r\n    for (let entry of data) {\r\n      if (observer) {\r\n        observer.disconnect();\r\n      }\r\n      const reportData = {\r\n        name: entry.name, //资源的名称\r\n        type: \"performance\", //类型\r\n        subType: entry.entryType, //子类型\r\n        sourceType: entry.initiatorType, //资源类型\r\n        duration: entry.duration, //加载时间\r\n        dns: entry.domainLookupEnd - entry.domainLookupStart, //DNS解析时间\r\n        tcp: entry.connectEnd - entry.connectStart, //TCP连接时间\r\n        redirect: entry.redirectEnd - entry.redirectStart, //重定向时间\r\n        ttfb: entry.responseStart, //首字节时间\r\n        protocol: entry.nextHopProtocol, //请求协议\r\n        responseBodySize: entry.encodedBodySize, //响应体大小\r\n        responseHeaderSize: entry.transferSize - entry.encodedBodySize, //响应头大小\r\n        transferSize: entry.transferSize, //请求内容大小\r\n        resourceSize: entry.decodedBodySize, //资源解压后大小\r\n        startTime: performance.now(), //开始时间\r\n      };\r\n      //上报数据\r\n      lazyReportBatch(reportData);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 页面所有资源加载\r\n   */\r\n  const observer = new PerformanceObserver(entryHandler);\r\n  observer.observe({ type: [\"resource\"], buffered: true });\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n\r\nexport default function observerFCP() {\r\n  const entryHandler = (list) => {\r\n    for (const entry of list.getEntries()) {\r\n      if (entry.name === \"first-contentful-paint\") {\r\n        observer.disconnect();\r\n        const json = entry.toJSON();\r\n        console.log(json);\r\n        const reportData = {\r\n          ...json,\r\n          type: \"performance\",\r\n          subType: entry.name,\r\n          pageUrl: window.location.href,\r\n        };\r\n        //上报数据\r\n        lazyReportBatch(reportData);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 统计和计算FCP的时间\r\n   */\r\n  const observer = new PerformanceObserver(entryHandler);\r\n  //buffered:true 表示在页面加载完成后，仍然可以获取到FP的时间\r\n  observer.observe({ type: \"paint\", buffered: true });\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n\r\nconst entryHandler = (list) => {\r\n  if (observer) {\r\n    observer.disconnect();\r\n  }\r\n  for (const entry of list.getEntries()) {\r\n    const json = entry.toJSON();\r\n    console.log(json);\r\n    const reportData = {\r\n      ...json,\r\n      type: \"performance\",\r\n      subType: entry.name,\r\n      pageUrl: window.location.href,\r\n    };\r\n    //上报数据\r\n    lazyReportBatch(reportData);\r\n  }\r\n};\r\n\r\n/**\r\n * 统计和计算LCP的时间\r\n */\r\n// 添加默认导出函数\r\nexport default function observerLCP() {\r\n  const observer = new PerformanceObserver(entryHandler);\r\n  //buffered:true 表示在页面加载完成后，仍然可以获取到FP的时间\r\n  observer.observe({ type: [\"largest-contentful-paint\"], buffered: true });\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n\r\n/**\r\n * 监听页面加载\r\n */\r\nexport default function observerLoad() {\r\n  window.addEventListener(\"pageShow\", function (event) {\r\n    requestAnimationFrame(() => {\r\n      [\"load\"].forEach((type) => {\r\n        const reportData = {\r\n          type: \"performance\",\r\n          subType: type,\r\n          pageUrl: window.location.href,\r\n          startTime: performance.now() - event.timeStamp,\r\n        };\r\n        //上报数据\r\n        lazyReportBatch(reportData);\r\n      });\r\n    }, true);\r\n  });\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n\r\n/**\r\n * 监听页面绘制\r\n */\r\nexport default function observerPaint() {\r\n  const entryHandler = (list) => {\r\n    for (const entry of list.getEntries()) {\r\n      if (entry.name === \"first-paint\") {\r\n        observer.disconnect();\r\n        const json = entry.toJSON();\r\n        console.log(json);\r\n        const reportData = {\r\n          ...json,\r\n          type: \"performance\",\r\n          subType: entry.name,\r\n          pageUrl: window.location.href,\r\n        };\r\n        //上报数据\r\n        lazyReportBatch(reportData);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 统计和计算FP的时间\r\n   */\r\n  const observer = new PerformanceObserver(entryHandler);\r\n  //buffered:true 表示在页面加载完成后，仍然可以获取到FP的时间\r\n  observer.observe({ type: \"paint\", buffered: true });\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n\r\n/**\r\n * 重写XMLHttpRequest\r\n */\r\nexport const originalProto = XMLHttpRequest.prototype;\r\nexport const originalSend = originalProto.send;\r\nexport const originalOpen = originalProto.open;\r\n\r\nfunction overwriteOpenAndSend() {\r\n  originalProto.open = function newOpen(...args) {\r\n    this.url = args[1];\r\n    this.method = args[0];\r\n    originalOpen.apply(this,args);\r\n  }\r\n  originalProto.send = function newSend(...args) {\r\n    this.startTime = Date.now();\r\n    const onLoaded = () => {\r\n      this.endTime = Date.now();\r\n      this.duration = this.endTime - this.startTime;\r\n      const { url,method,startTime,endTime,duration,status } = this;\r\n      const reportData = {\r\n        status,\r\n        url,\r\n        startTime,\r\n        endTime,\r\n        duration,\r\n        method: method.toUpperCase(),\r\n        type: 'performance',\r\n        success: status >= 200 && status <300,\r\n        subType: 'xhr',\r\n      }\r\n      //上报数据\r\n      lazyReportBatch(reportData);\r\n      this.removeEventListener('loadend',onLoaded,true);\r\n    }\r\n    this.addEventListener('loadend',onLoaded,true);\r\n    originalSend.apply(this,args);\r\n  }\r\n}\r\n\r\n/**\r\n * 监听XMLHttpRequest\r\n */\r\nexport default function xhr() {\r\n  overwriteOpenAndSend();\r\n}","import fetch from \"./fetch\";\r\nimport observerEntries from \"./observerEntries\";\r\nimport observerFCP from \"./observerFCP\";\r\nimport observerLCP from \"./observerLCP\";\r\nimport observerLoad from \"./observerLoad\";\r\nimport observerPaint from \"./observerPaint\";\r\nimport xhr from \"./xhr\";\r\n\r\n/**\r\n * 性能监控\r\n */\r\nexport default function performance() {\r\n  fetch();\r\n  observerEntries();\r\n  observerFCP();\r\n  observerLCP();\r\n  observerLoad();\r\n  observerPaint();\r\n  xhr();\r\n}\r\n","import { generateUniqueId } from \"../utils\";\r\nimport { lazyReportBatch } from \"../report\";\r\n/**\r\n * 监听点击事件\r\n */\r\nexport default function onClick() {\r\n  [\"mousedown\", \"touchstart\"].forEach((eventType) => {\r\n    window.addEventListener(eventType, (e) => {\r\n      const target = e.target;\r\n      if (target.tagName) {\r\n        const reportData = {\r\n          //scrollTop: document.documentElement.scrollTop,\r\n          type: \"behavior\",\r\n          subType: \"click\",\r\n          uuid: generateUniqueId(),\r\n          startTime: e.timeStamp,\r\n          target: target.tagName,\r\n          innerHTML: target.innerHTML,\r\n          outerHTML: target.outerHTML,\r\n          width: target.offsetWidth,\r\n          height: target.offsetHeight,\r\n          eventType,\r\n          path: e.path,\r\n        };\r\n        lazyReportBatch(reportData);\r\n      }\r\n    });\r\n  });\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\nimport { generateUniqueId } from \"../utils\";\r\n\r\n/**\r\n * 监听页面切换\r\n */\r\nexport default function pageChange() {\r\n  //hash or history 两种路由模式\r\n\r\n  /**\r\n   * hash 模式\r\n   */\r\n  let oldUrl = \"\";\r\n  window.addEventListener(\r\n    \"hashchange\",\r\n    function (event) {\r\n      const newUrl = event.newURL;\r\n      const reportData = {\r\n        from: oldUrl,\r\n        to: newUrl,\r\n        type: \"behavior\",\r\n        subType: \"hashChange\",\r\n        uuid: generateUniqueId(),\r\n        startTime: performance.now(),\r\n      };\r\n      lazyReportBatch(reportData);\r\n      oldUrl = newUrl;\r\n    },\r\n    true\r\n  );\r\n\r\n  /**\r\n   * history 模式\r\n   */\r\n  let from = \"\";\r\n  window.addEventListener(\r\n    \"popstate\",\r\n    function (event) {\r\n      const to = window.location.href;\r\n      const reportData = {\r\n        from: from,\r\n        to: to,\r\n        type: \"behavior\",\r\n        subType: \"popstate\",\r\n        uuid: generateUniqueId(),\r\n        startTime: performance.now(),\r\n      };\r\n      lazyReportBatch(reportData);\r\n      from = to;\r\n    },\r\n    true\r\n  );\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\nimport { generateUniqueId } from \"../utils\";\r\n\r\nexport default function pv() {\r\n  const reportData = {\r\n    type : 'behavior',//类型\r\n    subType : 'pv',//子类型\r\n    pageUrl : window.location.href,//页面url\r\n    startTime : performance.now(),//开始时间\r\n    referrer : document.referrer,//来源\r\n    uuid : generateUniqueId(),//唯一id\r\n  }\r\n  lazyReportBatch(reportData);\r\n}\r\n","import onClick from \"./onClick\";\r\nimport pageChange from \"./pageChange\";\r\nimport pv from \"./pv\";\r\n\r\n/**\r\n * 行为监控\r\n */\r\nexport default function behavior() {\r\n  onClick();\r\n  pageChange();\r\n  pv();\r\n}\r\n","import { lazyReportBatch } from \"../report\";\r\n\r\n/**\r\n * 监听错误\r\n */\r\nexport default function error() {\r\n  //捕获资源加载失败的错误 ：js css img\r\n  window.addEventListener(\r\n    \"error\",\r\n    function (e) {\r\n      const target = e.target;\r\n      if (!target) return;\r\n      if (target.src || target.href) {\r\n        const url = target.src || target.href;\r\n        const reportData = {\r\n          type: \"error\",\r\n          subType: \"resource\",\r\n          url,\r\n          html: target.outerHTML,\r\n          pageUrl: window.location.href,\r\n          path: e.path,\r\n        };\r\n        //上报数据\r\n        lazyReportBatch(reportData);\r\n      }\r\n    },\r\n    true\r\n  );\r\n  \r\n  //捕获js错误\r\n  window.onerror = function (msg, url, linNo, columnNo, error) {\r\n    const reportData = {\r\n      type: \"error\",\r\n      subType: \"js\",\r\n      msg,\r\n      url,\r\n      linNo,\r\n      columnNo,\r\n      stack: error.stack,\r\n      pageUrl: window.location.href,\r\n      startTime: performance.now(),\r\n    };\r\n    //上报数据\r\n    lazyReportBatch(reportData);\r\n  };\r\n\r\n  //捕获promise错误 async await\r\n  window.addEventListener(\"unhandledrejection\", function (e) {\r\n    const reportData = {\r\n      type: \"error\",\r\n      subType: \"promise\",\r\n      reason: e.reason?.stack,\r\n      pageUrl: window.location.href,\r\n      startTime: e.timeStamp,\r\n    };\r\n    //上报数据\r\n    lazyReportBatch(reportData);\r\n  }, true);\r\n}\r\n","import { setConfig } from \"./config\";\r\nimport { lazyReportBatch } from \"./report\";\r\nimport performance from \"./performance/index.js\";\r\nimport behavior from \"./behavior/index.js\";\r\nimport error from \"./error/index.js\";\r\n\r\nwindow.__webEyeSDK__ = {\r\n  version: \"0.0.1\",\r\n};\r\n\r\n//针对Vue项目的错误捕获\r\nexport function install(Vue, options) {\r\n  if (__webEyeSDK__.vue) return;\r\n  __webEyeSDK__.vue = true;\r\n  const handler = Vue.config.errorHandler;\r\n\r\n  //vue项目中，通过Vue.config.errorHandler配置全局错误处理函数 捕获错误\r\n  Vue.config.errorHandler = function (err, vm, info) {\r\n    // 上报具体的错误\r\n    const reportData = {\r\n      info,\r\n      error: err.stack,\r\n      subType: 'vue',\r\n      type: 'error',\r\n      startTime: window.performance.now(),\r\n      pageUrl: window.location.href,\r\n    };\r\n    lazyReportBatch(reportData);\r\n    if (handler) {\r\n      handler.call(this, err, vm, info);\r\n    }\r\n  };\r\n}\r\n\r\n//针对React项目的错误捕获\r\nexport function errorBoundary(err) {\r\n  if (__webEyeSDK__.react) return;\r\n  __webEyeSDK__.react = true;\r\n  // 上报具体的错误\r\n  const reportData = {\r\n    info,\r\n    error: err?.stack,\r\n    subType: 'react',\r\n    type: 'error',\r\n    startTime: window.performance.now(),\r\n    pageUrl: window.location.href,\r\n  }\r\n  lazyReportBatch(reportData);\r\n}\r\n\r\n/**\r\n * 初始化\r\n * @param {Object} options 配置对象\r\n */\r\nexport function init(options) {\r\n  setConfig(options);\r\n  error();\r\n}\r\n\r\nexport default {\r\n  install,\r\n  errorBoundary,\r\n  performance,\r\n  behavior,\r\n  error,\r\n  init\r\n};\r\n"],"names":["config","url","projectName","appId","userId","isImageUpload","batchSize","setConfig","options","key","deepCopy","target","_typeof","result","Array","isArray","generateUniqueId","Date","now","Math","random","toString","substring","cache","getCache","addCache","data","push","clearCache","length","originalOpen","XMLHttpRequest","prototype","open","originalSend","send","report","console","error","reportData","JSON","stringify","id","imgRequest","window","navigator","sendBeacon","beaconRequest","xhrRequest","lazyReportBatch","dataCache","img","Image","src","concat","encodeURIComponent","requestIdleCallback","xhr","call","timeout","setTimeout","originalFetch","fetch","overwriteFetch","newFetch","startTime","type","subType","method","then","res","endTime","duration","clone","status","success","ok","catch","err","observerEntries","document","readyState","observerEvent","onload","removeEventListener","addEventListener","entryHandler","list","getEntries","_iterator","_createForOfIteratorHelper","_step","s","n","done","entry","value","observer","disconnect","name","entryType","sourceType","initiatorType","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","redirect","redirectEnd","redirectStart","ttfb","responseStart","protocol","nextHopProtocol","responseBodySize","encodedBodySize","responseHeaderSize","transferSize","resourceSize","decodedBodySize","performance","e","f","PerformanceObserver","observe","buffered","observerFCP","json","toJSON","log","_objectSpread","pageUrl","location","href","observerLCP","observerLoad","event","requestAnimationFrame","forEach","timeStamp","observerPaint","originalProto","overwriteOpenAndSend","newOpen","_len","arguments","args","_key","apply","newSend","_this","onLoaded","toUpperCase","_len2","_key2","onClick","eventType","tagName","uuid","innerHTML","outerHTML","width","offsetWidth","height","offsetHeight","path","pageChange","oldUrl","newUrl","newURL","from","to","pv","referrer","behavior","html","onerror","msg","linNo","columnNo","stack","_e$reason","reason","__webEyeSDK__","version","install","Vue","vue","handler","errorHandler","vm","info","errorBoundary","react","init"],"mappings":"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"}